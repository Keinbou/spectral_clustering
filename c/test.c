#include "matrix.c"
#include "spectral.c"

int main(){/*
    size_t s = 5;
    int Nrun = 31;
    double tol = 1.0E-22;

    int matrixType = 4;
    LOG(2, "matrixType:", int2String(matrixType));
    if (matrixType == 0 || matrixType == 1 || matrixType == 2)
    {
        s = 5;
    } else if (matrixType == 3 || matrixType == 4) {
        s = 2;
    }

    float (*L)[s][s] = malloc(sizeof(*L));
    float (*V)[s][s] = malloc(sizeof(*V));

    for ( int i=0; i<s; ++i )
    {
        for ( int j=0; j<s; ++j )
        {
            if (i==j) {(*L)[i][j] = 1.0; continue;}
            (*L)[i][j] = 0.5;
        }
    }
    if (matrixType == 0) // Toeplitz Matrix / Tridiagonal Matrix
    {
        (*L)[0][0] = 1.0000; (*L)[0][1] = 0.5000; (*L)[0][2] = 0.2500; (*L)[0][3] = 0.1250; (*L)[0][4] = 0.0625;
        (*L)[1][0] = 0.5000; (*L)[1][1] = 1.0000; (*L)[1][2] = 0.5000; (*L)[1][3] = 0.2500; (*L)[1][4] = 0.1250;
        (*L)[2][0] = 0.2500; (*L)[2][1] = 0.5000; (*L)[2][2] = 1.0000; (*L)[2][3] = 0.5000; (*L)[2][4] = 0.2500;
        (*L)[3][0] = 0.1250; (*L)[3][1] = 0.2500; (*L)[3][2] = 0.5000; (*L)[3][3] = 1.0000; (*L)[3][4] = 0.5000;
        (*L)[4][0] = 0.0625; (*L)[4][1] = 0.1250; (*L)[4][2] = 0.2500; (*L)[4][3] = 0.5000; (*L)[4][4] = 1.0000;
    } else if (matrixType == 1) // Real symmetric Matrix with Zer0s
    {
        (*L)[0][0] = 4.0000; (*L)[0][1] = 1.0000; (*L)[0][2] = 0.0000; (*L)[0][3] = 0.0000; (*L)[0][4] = 0.0000;
        (*L)[1][0] = 1.0000; (*L)[1][1] = 4.0000; (*L)[1][2] = 1.0000; (*L)[1][3] = 0.0000; (*L)[1][4] = 0.0000;
        (*L)[2][0] = 0.0000; (*L)[2][1] = 1.0000; (*L)[2][2] = 4.0000; (*L)[2][3] = 1.0000; (*L)[2][4] = 0.0000;
        (*L)[3][0] = 0.0000; (*L)[3][1] = 0.0000; (*L)[3][2] = 1.0000; (*L)[3][3] = 4.0000; (*L)[3][4] = 1.0000;
        (*L)[4][0] = 0.0000; (*L)[4][1] = 0.0000; (*L)[4][2] = 0.0000; (*L)[4][3] = 1.0000; (*L)[4][4] = 4.0000;
    } else if (matrixType == 2) // Example of a Laplacian graph Matrix
    {
        (*L)[0][0] =  4.0000; (*L)[0][1] = -1.0000; (*L)[0][2] = -1.0000; (*L)[0][3] = -1.0000; (*L)[0][4] = -1.0000;
        (*L)[1][0] = -1.0000; (*L)[1][1] =  2.0000; (*L)[1][2] =  0.0000; (*L)[1][3] = -1.0000; (*L)[1][4] =  0.0000;
        (*L)[2][0] = -1.0000; (*L)[2][1] =  0.0000; (*L)[2][2] =  2.0000; (*L)[2][3] =  0.0000; (*L)[2][4] = -1.0000;
        (*L)[3][0] = -1.0000; (*L)[3][1] = -1.0000; (*L)[3][2] =  0.0000; (*L)[3][3] =  3.0000; (*L)[3][4] = -1.0000;
        (*L)[4][0] = -1.0000; (*L)[4][1] =  0.0000; (*L)[4][2] = -1.0000; (*L)[4][3] = -1.0000; (*L)[4][4] =  3.0000;
    } else if (matrixType == 3) // 2x2 real symmetric Matrix
    {
        (*L)[0][0] = 2.0000; (*L)[0][1] = 0.5000;
        (*L)[1][0] = 0.5000; (*L)[1][1] = 6.0000;
    } else if (matrixType == 4) // 2x2 diagonal Matrix
    {
        (*L)[0][0] = 2.0000; (*L)[0][1] = 0.0000;
        (*L)[1][0] = 0.0000; (*L)[1][1] = 6.0000;
    }
    printMatrix(s, s, L, s, s, "Original matrix:");
    Givens(s, Nrun, L, V, tol);
    printMatrix(s, s, L, s, s, "Eigenvalues:");
    printMatrix(s, s, V, s, s, "Eigenvectors:");*/
    float *res = spectral(-1, 300, "../datasets/file_1.csv", 10, 3);
    /*
    float (*V)[3][3] = malloc(sizeof(*V));
    (*V)[0][0] = 1; (*V)[0][1] = 0; (*V)[0][2] = 0;
    (*V)[1][0] = 0; (*V)[1][1] = 1; (*V)[1][2] = 0;
    (*V)[2][0] = 0; (*V)[2][1] = 0; (*V)[2][2] = 1;
    float *clustered = kmeans(3, 3, V, 2);
    printList(3, clustered, 3, "list");
    *//*
    size_t s = 200;
    float (*L)[s][s] = malloc(sizeof(*L));
    float (*V)[s][s] = malloc(sizeof(*V));
    for (int i=0; i<s; ++i)
    {
        for (int j=0; j<s; ++j)
        {
            if (j%2==0 && i%2==0) (*L)[i][j] = -1;
            if (i==j) (*L)[i][j] = 100 - (j%2==1?0:1);
        }
    }
    printMatrix(s,s,L,6,6,"matrix");
    Givens(s, 31, L, V, 1.0E-22);
    printMatrix(s,s,L,6,6,"eigenvalues");
    printMatrix(s,s,V,6,6,"eigenvectors");*/
    //free(L); free(V);
    return 0;
}

/*
EXPECTED OUTPUT:
//////////separator//////////
matrixType: 0

Original matrix:
0       1.000000 0.500000 0.250000 0.125000 0.062500 
1       0.500000 1.000000 0.500000 0.250000 0.125000 
2       0.250000 0.500000 1.000000 0.500000 0.250000 
3       0.125000 0.250000 0.500000 1.000000 0.500000 
4       0.062500 0.125000 0.250000 0.500000 1.000000 
5x5 matrix. 5x5 printed.

Eigenvalues:
0       2.261928 0.000000 -0.000000 -0.000000 0.000000 
1       0.000000 0.457209 -0.000000 -0.000000 0.000000 
2       -0.000000 -0.000000 0.690343 0.000000 0.000000 
3       -0.000000 -0.000000 0.000000 1.230291 0.000000 
4       0.000000 0.000000 0.000000 0.000000 0.360229 
5x5 matrix. 5x5 printed.

Eigenvectors:
0       0.360537 -0.435162 -0.561122 -0.557345 0.234850 
1       0.481984 0.557346 0.096981 -0.435162 -0.508219 
2       0.524794 -0.000000 0.592851 0.000000 0.610834 
3       0.481984 -0.557345 0.096981 0.435162 -0.508219 
4       0.360537 0.435162 -0.561123 0.557345 0.234850 
5x5 matrix. 5x5 printed.
//////////separator//////////
matrixType: 1
Original matrix:
0       4.000000 1.000000 0.000000 0.000000 0.000000 
1       1.000000 4.000000 1.000000 0.000000 0.000000 
2       0.000000 1.000000 4.000000 1.000000 0.000000 
3       0.000000 0.000000 1.000000 4.000000 1.000000 
4       0.000000 0.000000 0.000000 1.000000 4.000000 
5x5 matrix. 5x5 printed.

Eigenvalues:
0       5.000000 0.000000 -0.000000 0.000000 0.000000 
1       0.000000 3.000000 -0.000000 0.000000 -0.000000 
2       -0.000000 -0.000000 5.732050 -0.000000 0.000000 
3       0.000000 0.000000 -0.000000 2.267949 -0.000000 
4       0.000000 -0.000000 0.000000 -0.000000 4.000000 
5x5 matrix. 5x5 printed.

Eigenvectors:
0       0.500000 -0.500000 0.288675 -0.288675 0.577350 
1       0.500000 0.500000 0.500000 0.500000 -0.000000 
2       -0.000000 -0.000000 0.577350 -0.577350 -0.577350 
3       -0.500000 -0.500000 0.500000 0.500000 -0.000000 
4       -0.500000 0.500000 0.288675 -0.288675 0.577350 
5x5 matrix. 5x5 printed.
//////////separator//////////
matrixType: 2
Original matrix:
0       2.000000 -1.000000 -1.000000 0.000000 0.000000 
1       -1.000000 2.000000 0.000000 -1.000000 0.000000 
2       -1.000000 0.000000 2.000000 0.000000 -1.000000 
3       0.000000 -1.000000 0.000000 2.000000 -1.000000 
4       0.000000 0.000000 -1.000000 -1.000000 2.000000 
5x5 matrix. 5x5 printed.

Eigenvalues:
0       -0.000000 0.000000 0.000000 -0.000000 0.000000 
1       0.000000 3.618034 -0.000000 0.000000 -0.000000 
2       0.000000 -0.000000 1.381966 -0.000000 0.000000 
3       -0.000000 0.000000 -0.000000 1.381966 0.000000 
4       0.000000 -0.000000 0.000000 0.000000 3.618034 
5x5 matrix. 5x5 printed.

Eigenvectors:
0       0.447214 -0.272811 -0.222544 -0.592009 0.570591 
1       0.447214 0.556094 -0.631803 0.028711 -0.301264 
2       0.447214 -0.114676 0.494264 -0.394593 -0.621972 
3       0.447214 -0.626968 -0.167932 0.609753 -0.083136 
4       0.447214 0.458361 0.528016 0.348137 0.435781 
5x5 matrix. 5x5 printed.
//////////separator//////////
matrixType: 3
Original matrix:
0       2.000000 0.500000 
1       0.500000 6.000000 
2x2 matrix. 2x2 printed.

Eigenvalues:
0       1.938447 0.000000 
1       0.000000 6.061553 
2x2 matrix. 2x2 printed.

Eigenvectors:
0       0.992508 0.122183 
1       -0.122183 0.992508 
2x2 matrix. 2x2 printed.
//////////separator//////////
matrixType: 4
Original matrix:
0       2.000000 0.000000 
1       0.000000 6.000000 
2x2 matrix. 2x2 printed.

Eigenvalues:
0       2.000000 0.000000 
1       0.000000 6.000000 
2x2 matrix. 2x2 printed.

Eigenvectors:
0       1.000000 0.000000 
1       0.000000 1.000000 
2x2 matrix. 2x2 printed.
*/